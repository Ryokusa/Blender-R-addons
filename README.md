<!-- TODO: APIドキュメントを生成するかどうか考える -->
<!-- # [API Documentation](https://luvoid.github.io/Blender-CM3D2-Converter/)

[https://luvoid.github.io/Blender-CM3D2-Converter](https://luvoid.github.io/Blender-CM3D2-Converter/) ([Translated](https://luvoid-github-io.translate.goog/Blender-CM3D2-Converter/index.html?_x_tr_sl=auto&_x_tr_tl=default)) -->

# Blender-Ryokusasa-Addon

[Blender-CM3D2-Converter](https://github.com/luvoid/Blender-CM3D2-Converter) から CM3D2 関連の機能を取り除いたもの

**注意点**

- 緑茶々(@Ryokusa)が CM3D2 の機能だけを取り除いてます
- ところどころ残ってるので順次消していきます

## 目次

- [インストール](#インストール)
- [使い方](#使い方)
- [機能一覧](#機能一覧)
- [規約](#規約)
- [model のフォーマット](#modelのフォーマット)
- [課題](#課題)

## インストール

画面右上の緑色の「Clone or download」→「[Download ZIP](https://github.com/trzr/Blender-CM3D2-Converter/archive/bl_28.zip)」からファイルをダウンロード・解凍し、  
　 Windows10 なら「C:\Users\ユーザー名\AppData\Roaming\Blender Foundation\Blender\2.80\scripts\addons\CM3D2 Converter\＊.py」となるように配置してください。  
　もしかしたらフォルダが存在しないかもしれませんが、その場合は作成してください。  
　![配置](http://i.imgur.com/QvbMDR1.jpg)  
　 Blender を起動しユーザー設定のアドオンタブで「cm3d」等で検索、  
　「Import-Export: CM3D2 Converter」をオンにすれば一時的に有効になります。  
　次回起動時も有効にしたい場合、「プリファレンスを保存」ボタンを押下するか、「プリファレンスを自動保存」を有効にして保存してください。  
　![有効化](http://i.imgur.com/6jmFWxQ.jpg)  
　一度インストールしてしまえば、アドオン設定画面かヘルプメニューからアップデート可能です。  
　![更新](http://i.imgur.com/KFvMeH0.jpg)

## 使い方

未定

## おまけツール (Misc Tools)

このアドオンで追加された機能は以下のアイコンで統一されています。
![専用アイコン](<CM3D2 Converter/kiss.png>)

### CM3D2 用マテリアルを新規作成

このアドオンで使える仕様のマテリアルを新規作成できます。  
　　「マテリアル」タブ > 「CM3D2 用マテリアルを新規作成」ボタン。  
　　出来るだけ汎用的な初期値にしていますが、細かい調整は必要になると思われます。  
　　![CM3D2用マテリアルを新規作成](http://i.imgur.com/l6TgmhY.jpg)

### クイック・ウェイト転送

メッシュデータの転送(ウェイト転送)を使いやすくしたものです。  
　　参考にするモデル → 割り当てるモデル の順で選択し、  
　　「メッシュデータ」タブ > 「頂点グループ」パネル > 「▼」ボタン > 「クイック・ウェイト転送」ボタン。  
　　オプションを変更しなければ、不要な頂点グループを削除してくれます。  
　　![クイック・ウェイト転送](http://i.imgur.com/r7Bq6ux.jpg)

### 頂点グループぼかし

頂点グループ(ウェイト)をぼかしてスムーズにします。  
　　モデルを選択し、「メッシュデータ」タブ > 「頂点グループ」パネル >  
　　>「▼」ボタン > 「頂点グループぼかし」ボタン。  
　　ウェイト転送でコピーしたウェイトがガタガタの時などにどうぞ。  
　　![頂点グループぼかし](http://i.imgur.com/p3HNTVR.jpg)

### シェイプキー強制転送

最も近い面(頂点)からシェイプキーをコピーします。  
　　参考にするモデル → 割り当てるモデル の順で選択し、  
　　「メッシュデータ」タブ > 「シェイプキー」パネル > 「▼」ボタン > 「シェイプキー強制転送」ボタン。  
　　あらかじめ参考にするモデルを分割しておくことで、コピーの精度を上げることが可能です。  
　　![シェイプキー強制転送](http://i.imgur.com/6y1s8Vd.jpg)

### シェイプキーの変形を拡大/縮小

シェイプキーの変形を強くしたり、もしくは弱くできます。  
　　モデルを選択し「メッシュデータ」タブ > 「シェイプキー」パネル >  
　　> 「▼」ボタン > 「シェイプキーの変形を拡大/縮小」ボタン。  
　　シェイプキーを転送したにも関わらず身体が服を突き抜ける場合などに、  
　　これで変形を大きくすると修正できるかもしれません。  
　　![シェイプキーの変形を拡大/縮小](http://i.imgur.com/vw9NO6Z.jpg)

### シェイプキーをぼかす

シェイプキーの変形をぼかしてスムーズにします。  
　　モデルを選択し「メッシュデータ」タブ > 「シェイプキー」パネル >  
　　> 「▼」ボタン > 「シェイプキーをぼかす」ボタン。  
　　「シェイプキー強制転送」でコピーした変形がガタガタの時などにどうぞ。  
　　![シェイプキーをぼかす](http://i.imgur.com/P69O44k.jpg)

### ボーン/頂点グループ名を CM3D2 用 ←→Blender 用に変換

ボーンと頂点グループの名前を Blender で左右対称編集できるように変換したり元に戻せます。  
　　メッシュを選択し「メッシュデータ」タブ > 「頂点グループ」パネル >  
　　> 「▼」ボタン > 「頂点グループ名を～」ボタン。  
　　もしくはアーマチュアを選択し「アーマチュアデータ」タブ > 「ボーン名を～」ボタン。  
　　![ボーン/頂点グループ名をCM3D2用←→Blender用に変換](http://i.imgur.com/6O5K5gm.jpg)

## 機能一覧

整理中…

- 「プロパティ」エリア → 「アーマチュアデータ」タブ
  - ボーン名を CM3D2 用 →Blender 用に変換
    - CM3D2 で使われてるボーン名を Blender で左右対称編集できるように変換します
  - ボーン名を Blender 用 →CM3D2 用に変換
    - CM3D2 で使われてるボーン名に元に戻します
  - ボーン情報をコピー
    - カスタムプロパティのボーン情報をクリップボードにコピーします
  - ボーン情報を貼り付け
    - カスタムプロパティのボーン情報をクリップボードから貼り付けます
  - ボーン情報を削除
    - カスタムプロパティのボーン情報を全て削除します
- 「プロパティ」エリア → 「モディファイア」タブ
  - モディファイア強制適用
    - シェイプキーのあるメッシュのモディファイアでも強制的に適用します
- 「プロパティ」エリア → 「メッシュデータ」タブ → 「頂点グループ」パネル
  - 頂点グループ名を CM3D2 用 →Blender 用に変換
    - CM3D2 で使われてるボーン名(頂点グループ名)を Blender で左右対称編集できるように変換します
  - 頂点グループ名を Blender 用 →CM3D2 用に変換
    - CM3D2 で使われてるボーン名(頂点グループ名)に戻します
- 「UV/画像エディター」エリア → ヘッダー
- 「UV/画像エディター」エリア → プロパティ → 「画像」パネル
- 画面右上 (「情報」エリア → ヘッダー)
  - 頂点数をチェック
    - 選択メッシュが Converter で出力可能な頂点数に収まっているかをチェックします
- 「3D ビュー」エリア → 追加(Shift+A) → CM3D2
  - CM3D2 用の素体をインポート
    - CM3D2 関係の素体を現在のシーンにインポートします
- 「3D ビュー」エリア → 追加(Shift+A) → カーブ
  - 髪の房を追加
    - アニメ調の髪の房を追加します
- 画面上部 (「情報」エリア → ヘッダー) → ヘルプ
  - CM3D2 Converter を更新
    - GitHub から最新版の CM3D2 Converter アドオンをダウンロードし上書き更新します
  - CM3D2 Converter の設定画面を開く
    - CM3D2 Converter アドオンの設定画面を表示します
- 「プロパティ」エリア → 「マテリアル」タブ
  - CM3D2 用マテリアルを新規作成
    - Blender-CM3D2-Converter で使用できるマテリアルを新規で作成します
  - クリップボードからマテリアルを貼り付け
    - クリップボード内のマテリアル情報から新規マテリアルを作成します
  - クリップボードからマテリアルを貼り付け
    - クリップボード内のテキストからマテリアル情報を上書きします
  - マテリアルをクリップボードにコピー
    - 表示しているマテリアルをテキスト形式でクリップボードにコピーします
  - マテリアルを装飾
    - スロット内のマテリアルを全て設定に合わせて装飾します
  - このテクスチャを見る
    - このテクスチャを見る
- 「プロパティ」エリア → 「メッシュデータ」タブ → 「シェイプキー」パネル → ▼ ボタン
  - クイック・シェイプキー転送
    - アクティブなメッシュに他の選択メッシュのシェイプキーを高速で転送します
  - 空間ぼかし・シェイプキー転送
    - アクティブなメッシュに他の選択メッシュのシェイプキーを遠いほどぼかして転送します
  - シェイプキーの変形に乗算
    - シェイプキーの変形に数値を乗算し、変形の強度を増減させます
  - シェイプキーぼかし
    - アクティブ、もしくは全てのシェイプキーをぼかします
  - このシェイプキーをベースに
    - アクティブなシェイプキーを他のシェイプキーのベースにします
- 「プロパティ」エリア → 「メッシュデータ」タブ → 「頂点グループ」パネル → ▼ ボタン
  - クイック・ウェイト転送
    - アクティブなメッシュに他の選択メッシュの頂点グループを高速で転送します
  - 空間ぼかし・ウェイト転送
    - アクティブなメッシュに他の選択メッシュの頂点グループを遠いほどぼかして転送します
  - 頂点グループぼかし
    - アクティブ、もしくは全ての頂点グループをぼかします
  - 旧・頂点グループぼかし
    - アクティブ、もしくは全ての頂点グループをぼかします
  - 頂点グループに乗算
    - 頂点グループのウェイトに数値を乗算し、ウェイトの強度を増減させます
  - 割り当てのない頂点グループを削除
    - どの頂点にも割り当てられていない頂点グループを全て削除します
- 「プロパティ」エリア → 「オブジェクト」タブ
  - ボーン情報をコピー
    - カスタムプロパティのボーン情報をクリップボードにコピーします
  - ボーン情報を貼り付け
    - カスタムプロパティのボーン情報をクリップボードから貼り付けます
  - ボーン情報を削除
    - カスタムプロパティのボーン情報を全て削除します
- 「プロパティ」エリア → 「オブジェクト」タブ → 「トランスフォーム」パネル
  - オブジェクトの位置を合わせる
    - アクティブオブジェクトの中心位置を、他の選択オブジェクトの中心位置に合わせます
- 「プロパティ」エリア → 「レンダー」タブ → 「ベイク」パネル
  - ベイク用の画像を作成
    - アクティブオブジェクトに素早くベイク用の空の画像を用意します
  - AO・ベイク
    - アクティブオブジェクトに素早く AO をベイクします
  - 擬似 AO・ベイク
    - アクティブオブジェクトに素早く擬似 AO をベイクします
  - ヘミライト・ベイク
    - アクティブオブジェクトに素早くヘミライトの陰をベイクします
  - 影・ベイク
    - アクティブオブジェクトに素早く影をベイクします
  - 側面陰・ベイク
    - アクティブオブジェクトに素早く側面陰をベイクします
  - グラデーション・ベイク
    - アクティブオブジェクトに素早くグラデーションをベイクします
  - 金属・ベイク
    - アクティブオブジェクトに素早く金属風にベイクします
  - ヘアー・ベイク
    - アクティブオブジェクトに素早く CM3D2 の髪風のテクスチャをベイクします
  - UV 縁・ベイク
    - アクティブオブジェクトに素早く UV の縁を黒くベイクします
  - メッシュ縁・ベイク
    - アクティブオブジェクトに素早くメッシュの縁を黒くベイクします
  - 密度・ベイク
    - アクティブオブジェクトに素早く密度をベイクします
  - メッシュ間距離・ベイク
    - アクティブオブジェクトに他オブジェクトとの距離をベイクします
  - 膨らみ・ベイク
    - アクティブオブジェクトに膨らんでいる部分を白くベイクします
  - 白い液体・ベイク
    - アクティブオブジェクトに白い液体をベイクします
- 「プロパティ」エリア → 「レンダー」タブ → 「レンダー」パネル
  - CM3D2 メニュー用のアイコンをレンダリング
    - CM3D2 内のアイコン画像に使用できそうな画像をレンダリングします
- 「プロパティ」エリア → 「テクスチャ」タブ
  - 画像を表示
    - 指定の画像を UV/画像エディターに表示します
  - テクスチャを探す
    - CM3D2 本体のインストールフォルダから tex ファイルを探して開きます
  - 設定をプレビューに同期
    - 設定値をテクスチャのプレビューに適用してわかりやすくします
  - トゥーンを選択
    - CM3D2 にデフォルトで入っているトゥーンテクスチャを選択できます
  - 色設定値を自動設定
    - 色関係の設定値をテクスチャの色情報から自動で設定します
  - tex で保存
    - テクスチャの画像を同フォルダに tex として保存します
  - 色設定値を設定
    - 色タイプの設定値を設定します
- 「テキストエディター」エリア → ヘッダー
  - テキストを表示
    - 指定したテキストをこの領域に表示します
  - テキストのボーン情報をコピー
    - テキストのボーン情報をカスタムプロパティへ貼り付ける形にしてクリップボードにコピーします
  - テキストのボーン情報を貼り付け
    - クリップボード内のボーン情報をテキストデータに貼り付けます
  - マテリアル情報テキストを全削除
    - CM3D2 で使用できるマテリアルテキストを全て削除します
- 「3D ビュー」エリア → メッシュ編集モード → 「W」キー
  - 選択面の描画順を最前面に
    - 選択中の面の描画順を最も前面/背面に並び替えます
- 「3D ビュー」エリア → ポーズモード → Ctrl+A (ポーズ → 適用)
  - 現在のポーズで素体化
    - 現在のポーズで衣装をモデリングしやすくする素体を作成します
- 「3D ビュー」エリア → 「ウェイトペイント」モード → ツールシェルフ → 「ウェイトツール」パネル
  - 選択部の頂点グループをぼかす
    - 選択メッシュの頂点グループの割り当てをぼかします
  - 選択部の頂点グループに四則演算
    - 選択メッシュの頂点グループの割り当てに四則演算を施します

## 課題

- ボーン情報を人力で編集可能な形にする([有志のアドオンにより実現](https://github.com/trzr/Blender-CM3D2-BoneUtil))
- モーションファイル(.anm)関係の完全対応
